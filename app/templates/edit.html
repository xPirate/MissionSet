
{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Edit Report</h2>
  {% if error %}<p class="error">{{ error }}</p>{% endif %}
  <form method="post" action="/data/{{ item.id }}/edit">
    <label>Title</label>
    <input type="text" name="title" value="{{ item.title }}" required>

    <div class="row">
      <div>
        <label>Start time</label>
        <input type="datetime-local" name="start_time" value="{{ item.start_time }}" required>
      </div>
      <div>
        <label>End time</label>
        <input type="datetime-local" name="end_time" value="{{ item.end_time }}" required>
      </div>
    </div>

    <label>Description</label>
    <textarea name="description" rows="5">{{ item.description }}</textarea>

    <label>Labels</label>
    <div class="labels">
      {% for lbl in ALLOWED_LABELS %}
        {% set checked = 'checked' if (lbl in (item.tags or '').split(',')) else '' %}
        <label><input type="checkbox" name="labels" value="{{ lbl }}" {{ checked }}> {{ lbl }}</label>
      {% endfor %}
    </div>

    <button type="submit">Save changes</button>
  </form>
</div>
{% endblock %}
