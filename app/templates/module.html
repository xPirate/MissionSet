{% extends "base.html" %}
{% block content %}
<h1 class="page-title">{{ label }} Reports</h1>

{% if can_create %}
<details class="collapsible">
  <summary>âž• Add {{ label }} Report</summary>
  {% if error %}<p class="error">{{ error }}</p>{% endif %}
  <form method="post" action="/module/{{ label }}/new">
    <label>Title</label>
    <input type="text" name="title" required>

    <label>Author</label>
    <input type="text" value="{{ current_user_name }}" readonly>

    <div class="row">
      <div><label>Start time</label><input type="datetime-local" name="start_time" required></div>
      <div><label>End time</label><input type="datetime-local" name="end_time" required></div>
    </div>

    <label>Description</label>
    <textarea name="description" rows="4"></textarea>

    <button type="submit">Save</button>
  </form>
</details>
{% endif %}

<div class="card" style="margin-top:16px;">
  {% if items|length == 0 %}
    <p>No {{ label }} reports yet.</p>
  {% else %}
  <table>
    <thead><tr><th>Title</th><th>Author</th><th>Start</th><th>End</th><th>Created</th></tr></thead>
    <tbody>
      {% for row in items %}
      <tr>
        <td><a href="/data/{{ row.id }}">{{ row.title }}</a></td>
        <td>{{ row.author }}</td>
        <td><small class="mono">{{ row.start_time }}</small></td>
        <td><small class="mono">{{ row.end_time }}</small></td>
        <td><small class="mono">{{ row.created_at }}</small></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>
{% endblock %}
